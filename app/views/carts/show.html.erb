<% provide(:title, "Your cart") %>
<h1>Your cart</h1>

<% if @cart.line_items.empty? %>
    <div>is empty.</div>
<% else %>
    <table class="table tbale-striped">
        <thead>
            <tr>
                <th>Product</th>
                <th>Price</th>
            </tr>
        </thead>
        <tbody>
            <% @cart.line_items.each do |item| %>
                <tr>
                    <td> <%= item.product.title %> </td>
                    <td> <%= number_to_currency(item.product.price, unit: '€ ') %> </td>
                    <td> <%= link_to 'Remove', line_item_path(item.product_id),
                        data: { confirm: 'Are you sure?' }, method: :delete %> </td>
                </tr>
            <% end %>
        </tbody>
        <tr>
            <td>Total price:</td> 
            <td> <%= number_to_currency(total_price(@cart.line_items), unit: '€ ') %> </td>
            <td> <%= link_to 'Delete cart', cart_path,
                data: { confirm: 'Are you sure?' }, method: :delete %> </td>
        </tr>
    </table>
    <%= button_to "Place order", new_order_path, method: :get %>
<% end %>
